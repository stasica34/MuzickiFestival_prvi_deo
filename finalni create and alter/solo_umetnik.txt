CREATE TABLE SOLO_UMETNIK
(
    "ID" NUMBER,
    "SVIRA_INSTRUMENT" VARCHAR2(3 BYTE),
    "TIP_INSTRUMENTA" VARCHAR2(50 BYTE)
);

//keys i null//

ALTER TABLE SOLO_UMETNIK MODIFY ("ID" NOT NULL);
ALTER TABLE SOLO_UMETNIK MODIFY ("SVIRA_INSTRUMENT" NOT NULL);

ALTER TABLE SOLO_UMETNIK ADD CONSTRAINT "PK_SOLO_UMETNIK" PRIMARY KEY ("ID");

ALTER TABLE SOLO_UMETNIK ADD CONSTRAINT "SOLO_UMETNIK_FK1" FOREIGN KEY ("ID")
    REFERENCES IZVODJAC ("ID") ON DELETE CASCADE;

//constraints//

ALTER TABLE SOLO_UMETNIK ADD CONSTRAINT "CHK_SOLO_SVIRA_INSTRUMENT" CHECK ("SVIRA_INSTRUMENT" IN ('DA', 'NE'));

ALTER TABLE SOLO_UMETNIK ADD CONSTRAINT "CHK_SOLO_LOGIKA_INSTR" CHECK (
    (
        SVIRA_INSTRUMENT = 'DA' AND 
        LENGTH(TRIM(TIP_INSTRUMENTA)) > 0 AND
        REGEXP_LIKE(TRIM(TIP_INSTRUMENTA), '^[A-Za-zĆČŠĐŽćčšđž\s]+$')
    ) OR
    (
        SVIRA_INSTRUMENT = 'NE' AND 
        TIP_INSTRUMENTA IS NULL
    )
);
