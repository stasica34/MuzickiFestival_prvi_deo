CREATE TABLE CLAN
(
    "IME" VARCHAR2(50 BYTE),
    "INSTRUMENT" VARCHAR2(50 BYTE),
    "BEND_ID" NUMBER,
    "CLAN_ID" NUMBER,
    "ULOGA" VARCHAR2(20 BYTE)
)

//sekvence i trigger//
CREATE SEQUENCE CLAN_PK START WITH 1 INCREMENT BY 1 NOCACHE;

CREATE OR REPLACE TRIGGER CLAN_AUTO_PK
BEFORE INSERT ON CLAN
REFERENCING NEW AS new
FOR EACH ROW
BEGIN
    SELECT CLAN_PK.nextval
    INTO :new.CLAN_ID
    FROM dual;
END;
/
ALTER TRIGGER CLAN_AUTO_PK ENABLE;

//keys i null//
ALTER TABLE CLAN MODIFY ("CLAN_ID" NOT NULL ENABLE);
ALTER TABLE CLAN MODIFY ("BEND_ID" NOT NULL ENABLE);
ALTER TABLE CLAN MODIFY ("IME" NOT NULL ENABLE);
ALTER TABLE CLAN MODIFY ("INSTRUMENT" NOT NULL ENABLE);
ALTER TABLE CLAN MODIFY ("ULOGA" NOT NULL ENABLE);
ALTER TABLE CLAN ADD CONSTRAINT "CLAN_PK" PRIMARY KEY ("CLAN_ID");
ALTER TABLE CLAN ADD CONSTRAINT "FK_CLAN_BEND" FOREIGN KEY ("BEND_ID")
    REFERENCES BEND ("ID") ON DELETE CASCADE;

//constraints//

ALTER TABLE CLAN ADD CONSTRAINT "CHK_CLAN_IME" CHECK (
    REGEXP_LIKE(TRIM(IME), '^[A-Za-z]+([ ][A-Za-z]+)*$')
);

ALTER TABLE CLAN ADD CONSTRAINT "CHK_CLAN_INSTRUMENT" CHECK (
    REGEXP_LIKE(TRIM(INSTRUMENT), '^[A-Za-z]+([ ][A-Za-z]+)*$')
);


ALTER TABLE CLAN ADD CONSTRAINT "CHK_CLAN_ULOGA" CHECK (
    REGEXP_LIKE(TRIM(ULOGA), '^[A-Za-z]+([ ][A-Za-z]+)*$')
);
