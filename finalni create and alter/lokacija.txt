CREATE TABLE LOKACIJA
(
    "GPS_KOORDINATE" VARCHAR2(50 BYTE),
    "NAZIV" VARCHAR2(50 BYTE),
    "OPIS" VARCHAR2(200 BYTE),
    "MAX_KAPACITET" NUMBER(*,0),
    "TIP_LOKACIJE" VARCHAR2(20 BYTE),
    "ID" NUMBER
);

//sekvence//
CREATE SEQUENCE LOKACIJA_PK START WITH 1 INCREMENT BY 1 NOCACHE;

//keys i null//
ALTER TABLE LOKACIJA MODIFY ("ID" NOT NULL);
ALTER TABLE LOKACIJA MODIFY ("TIP_LOKACIJE" NOT NULL);
ALTER TABLE LOKACIJA MODIFY ("MAX_KAPACITET" NOT NULL);
ALTER TABLE LOKACIJA MODIFY ("NAZIV" NOT NULL);
ALTER TABLE LOKACIJA MODIFY ("GPS_KOORDINATE" NOT NULL);
ALTER TABLE LOKACIJA ADD CONSTRAINT "LOKACIJA_PK" PRIMARY KEY ("ID");

//constraints//
ALTER TABLE LOKACIJA ADD CONSTRAINT "CHK_LOKACIJA_MAX_KAPACITET" CHECK (MAX_KAPACITET > 0);
ALTER TABLE LOKACIJA ADD CONSTRAINT "CHK_LOKACIJA_TIP" CHECK (
    LENGTH(TRIM(TIP_LOKACIJE)) > 0 AND
    TIP_LOKACIJE IN ('ZATVORENA', 'OTVORENA', 'KOMBINOVANA')
);
ALTER TABLE LOKACIJA ADD CONSTRAINT "CHK_LOKACIJA_GPS_JEDNOSTAVNO" CHECK (
    LENGTH(TRIM(GPS_KOORDINATE)) > 0 AND
    REGEXP_LIKE(TRIM(GPS_KOORDINATE), '^-?\d+(\.\d*)?,\s*-?\d+(\.\d*)?$')
);
ALTER TABLE LOKACIJA ADD CONSTRAINT "CHK_LOKACIJA_NAZIV" CHECK (
    LENGTH(TRIM(NAZIV)) > 0 AND 
    REGEXP_LIKE(TRIM(NAZIV), '^[A-Za-zĆČŠĐŽćčšđž0-9]+(\s[A-Za-zĆČŠĐŽćčšđž0-9]+)?$')
);
